## 7.1 ロードバランサーとは？

### 7.1.1 ロードバランサーの役割

ユーザ数が増えると 1 台のサーバでリクエストをさばききれない。
サーバを増やして対処する方法をスケールアウトという。
スケールアウトを行うために欠かせないのがロードバランサー。

- リクエストの分散: 大量に送られるユーザリクエストを複数のサーバに負荷が均等になるように割り振る。
- SSL 処理: HTTPS 通信による暗号化されたパケットの解読処理をサーバに任せると負荷が上がってしまう。ロードバランサーが暗号を処理し、ロードバランサーとサーバは HTTP 通信を行うことで負荷を軽減する。
- 不正リクエスト対策: サーバにが不正な処理が送られないように監視する。

### 7.1.3 ロードバランサーによるリクエストのルーティング

ロードバランサーは VPC 外部からのリクエストを最初に受け付けるサーバである。
そのため公開 IP を持つ必要がある。
AWS では IGW を持つサブネットのリソースしか公開 IP を持てないので、ロードバランサーは必ずパブリックサブネットに置こう。

- 外部から送信されたパケットの行き先: ユーザからのリクエスト → IGW → ロードバランサー → Web サーバ
- 内部から返信されるパケットの行き先: Web サーバ → ロードバランサー → IGW → ユーザ

ここで内部から外部への通信だからといって NGW を経由しないことに注意する。
NGW はプライベートサブネット内のリソースが外部にリクエストを送信するときにのみ使われる。